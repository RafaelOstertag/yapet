<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
[
<!ENTITY cpr SYSTEM "copyright.sgml">
<!ENTITY supplatforms SYSTEM "supportedplatforms.sgml">
<!ENTITY pwrecord SYSTEM "pwrecord.sgml">
<!ENTITY caution SYSTEM "caution.sgml">
<!ENTITY license SYSTEM "license.sgml">
<!ENTITY bugreport SYSTEM "bugreport.sgml">
<!ENTITY OPENSSL "<citerefentry><refentrytitle>ssl</refentrytitle>
<manvolnum>3</manvolnum></citerefentry>">
<!ENTITY CRYPTO "<citerefentry><refentrytitle>crypto</refentrytitle>
<manvolnum>3</manvolnum></citerefentry>">
<!ENTITY CURSES "<citerefentry><refentrytitle>curses</refentrytitle>
<manvolnum>3X</manvolnum></citerefentry>">
<!ENTITY YP "@PACKAGE_NAME@">
<!ENTITY yp "<command>@PACKAGE@</command>">
<!ENTITY ypman "<citerefentry><refentrytitle>yapet</refentrytitle>
<manvolnum>1</manvolnum></citerefentry>">
<!ENTITY CSV2YAPET "csv2yapet">
<!ENTITY csv2yapet "<command>csv2yapet</command>">
<!ENTITY csv2yapetman "<citerefentry><refentrytitle>csv2yapet</refentrytitle>
<manvolnum>1</manvolnum></citerefentry>">
<!ENTITY YAPET2CSV "yapet2csv">
<!ENTITY yapet2csv "<command>yapet2csv</command>">
<!ENTITY yapet2csvman "<citerefentry condition='yapet2csv'><refentrytitle>yapet2csv</refentrytitle>
<manvolnum>1</manvolnum></citerefentry>">
<!ENTITY yapet_config "<citerefentry><refentrytitle>yapet_config</refentrytitle>
<manvolnum>5</manvolnum></citerefentry>">
<!ENTITY yapet_colors "<citerefentry><refentrytitle>yapet_colors</refentrytitle>
<manvolnum>5</manvolnum></citerefentry>">
<!ENTITY FREEBSD "<trademark class='registered'>FreeBSD</trademark>">
<!ENTITY SOLARIS "<trademark class='trademark'>Sun</trademark>
<trademark class='trademark'>Solaris</trademark>">
<!ENTITY YPPKG "@PACKAGE_TARNAME@-@PACKAGE_VERSION@.tar.gz">
<!ENTITY YPVER "@PACKAGE_VERSION@">
<!ENTITY DEFRCFILE "<envar>$HOME</envar><filename>/.yapet</filename>">
]>
<refentry id="yapet">
  <!-- $Id$ -->

  <refentryinfo>
     <productname>yapet</productname>
     &cpr;
  </refentryinfo>

  <refmeta>
    <refentrytitle>yapet</refentrytitle>
    <manvolnum>1</manvolnum>
    <refmiscinfo class="version">@PACKAGE_VERSION@</refmiscinfo>
    <refmiscinfo class="manual">User Commands</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>yapet</refname>
    <refpurpose>text based password manager</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis cmdlength="5">
      &yp;
      <group>
	<arg choice="opt" rep="norepeat"><option>-c</option></arg>
	<arg choice="opt" rep="norepeat"><option>-h</option></arg>
	<arg choice="opt" rep="norepeat"><option>-V</option></arg>
      </group>
      <group>
	<arg choice="opt" rep="norepeat"><option>-i</option></arg>
	<arg choice="opt" rep="norepeat"><option>-r</option><arg choice="req"
	rep="norepeat"><replaceable>rcfile</replaceable></arg></arg>
      </group>
      <group>
	<arg choice="opt" rep="norepeat"><option>-s</option></arg>
	<arg choice="opt" rep="norepeat"><option>-S</option></arg>
      </group>
      <arg choice="opt" rep="norepeat"><option>-t</option> <arg choice="req"
      rep="norepeat"><replaceable>sec</replaceable></arg></arg>

      <arg><replaceable>filename</replaceable></arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <!--
  -
  -  DESCRIPTION
  -
  -->
  <refsect1 id="description">
    <title>DESCRIPTION</title>

    <para>
      &yp; provides a text user interface for storing passwords and
      associated information (referred to as
      <firstterm>password records</firstterm>) in files encrypted on
      disk. A password record is comprised of a record name, host
      name, user name, password, and comment. A master password is
      required to encrypt/decrypt the password records in a given
      file. &yp; does not impose a limit of password records per file.
    </para>

    <para>
      Files created by &yp; always have the suffix
      <filename>.pet</filename>. This cannot be changed. Also, if a
      file is loaded using the command line, &yp; appends the suffix
      <filename>.pet</filename> to the file name unless the file name
      includes this suffix already. By default, &yp; refuses to load
      files not having a file mode of 600. This behavior can be
      changed by providing the <option>-s</option> option when
      starting &yp; or using a configuration file (see &yapet_config;,
      and <xref linkend="options"/>).
    </para>

    <para>
      After loading a file, the record name of each password record is
      displayed in a list. Existing password records can be opened by
      selecting them and pressing <keycap>Enter</keycap>. By default,
      existing password records are opened in read-only mode, to avoid
      accidental changes. Pressing <keycombo
      action='simul'><keycap>Ctrl</keycap>
      <keycap>r</keycap></keycombo> toggles between read-only and edit
      mode.
    </para>

    <para>
      &yp; relies on OpenSSL for encryption and decryption of password
      records. The cipher for encryption and decryption is Blowfish
      with a 448 bits key.
    </para>


    <para>
      Other features of &yp; are:
    </para>

    <itemizedlist>
      <listitem>
	<para>
	  Screen lock after a certain amount of inactivitiy when
	  password file is loaded (see also &yapet_config; and <xref
	  linkend="options" />.
	</para>
      </listitem>

      <listitem>
	<para>
	  Password records opened in read-only mode (default) hide the
	  password. Toggling into edit mode reveals the password (see
	  <xref linkend="passwordrecorddialog" />).
	</para>
      </listitem>

      <listitem>
	<para>
	  Import of CSV files (see &csv2yapet;).
	</para>
      </listitem>

      <listitem>
	<para>
	  Export of &YP; files to CSV files (see &yapet2csv;).
	</para>
      </listitem>

      <listitem>
	<para>
	  Integrated password generator.
	</para>
      </listitem>
    </itemizedlist>


    <refsect2 id="keys">
      <title>Main Window Function Keys</title>

      <para>
	Following function keys are recognized in the main window:
      </para>

      <variablelist>
	<varlistentry>
	  <term><keycap>h</keycap></term>

	  <listitem>
	    <para>
	      Show an overview of the function keys.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>Enter</keycap></term>

	  <listitem>
	    <para>
	      Open the currently selected password record.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>s</keycap></term>

	  <listitem>
	    <para>
	      Save changes to currently loaded file.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>r</keycap></term>

	  <listitem>
	    <para>
	      Open a file.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>e</keycap></term>

	  <listitem>
	    <para>
	      Create a new, empty file.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>l</keycap></term>

	  <listitem>
	    <para>
	      Lock the screen immediately. Takes only effect if a 
	      file is loaded.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>a</keycap></term>

	  <listitem>
	    <para>
	      Add a new password record.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>d</keycap></term>

	  <listitem>
	    <para>
	      Delete the currently selected password record.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>o</keycap></term>

	  <listitem>
	    <para>
	      Change the sort order of the password record list.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>/</keycap></term>

	  <listitem>
	    <para>
	      Search for a password record. The search is only
	      performed on the Name of the password record. Other
	      password record fields won't be searched.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>n</keycap></term>

	  <listitem>
	    <para>
	      Search for the next occurrence of a previous search
	      initiated by <keycap>/</keycap>.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>c</keycap></term>

	  <listitem>
	    <para>
	      Change the master password of the currently loaded &YP;
	      file.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>i</keycap></term>

	  <listitem>
	    <para>
	      Show various information about &YP; and the loaded file,
	      if any.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycombo action="simul"><keycap>Ctrl</keycap>
	  <keycap>l</keycap></keycombo> (<keycap>^L</keycap>)</term>

	  <listitem>
	    <para>
	      Redraw the entire screen.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>g</keycap></term>

	  <listitem>
	    <para>
	      Open the password generator.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>q</keycap></term>

	  <listitem>
	    <para>
	      Quit &YP;.
	    </para>
	  </listitem>
	</varlistentry>
      </variablelist>

    </refsect2>

    <refsect2 id="cursormovementkeys">
      <title>Cursor Movement Keys</title>

      <para>
	Cursor movement, whether in clear text or password fields, is
	accomplished by using the following keys:
      </para>

      <variablelist>
	<varlistentry>
	  <term><keycap>Left</keycap>, <keycombo action="simul">
	  <keycap>Ctrl</keycap> <keycap>b</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Moves the cursor one character to the left.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>Right</keycap>, <keycombo action="simul">
	  <keycap>Ctrl</keycap> <keycap>f</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Moves the cursor one character to the right.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>Home</keycap>, <keycombo action="simul">
	  <keycap>Ctrl</keycap> <keycap>a</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Moves the cursor at the beginning of the input field.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>End</keycap>, <keycombo action="simul">
	  <keycap>Ctrl</keycap> <keycap>e</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Moves the cursor at the end of the input field.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>Backspace</keycap></term>

	  <listitem>
	    <para>
	      Delete the charact left of the cursor.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>Delete</keycap>, <keycombo action="simul">
	  <keycap>Ctrl</keycap> <keycap>d</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Delete the charcter under the cursor.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycombo action="simul">
	  <keycap>Ctrl</keycap> <keycap>k</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Delete all charcters under and right of the cursor.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycombo action="simul">
	  <keycap>Ctrl</keycap> <keycap>u</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Delete all charcters left of the cursor.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycap>Enter</keycap>, <keycap>Tab</keycap></term>

	  <listitem>
	    <para>
	      Focus the next widget.
	    </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><keycombo action="simul">
	  <keycap>Shift</keycap> <keycap>Tab</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Focus the previous widget.
	    </para>
	  </listitem>
	</varlistentry>

      </variablelist>

    </refsect2>

    <refsect2 id="passwordrecorddialog">
      <title>Password Record Dialog Keys</title>

      <para>
	Following function keys are recognized in the password record
	dialog, besides cursor movement keys (see <xref
	linkend="cursormovementkeys" />):
      </para>

      <variablelist>
	<varlistentry>
	  <term><keycombo action="simul">
	  <keycap>Ctrl</keycap> <keycap>r</keycap></keycombo></term>

	  <listitem>
	    <para>
	      Toggle the password record dialog between read-only and
	      edit mode. In read-only mode, &yp; hides the password
	      (only supported on color terminals).
	    </para>
	  </listitem>
	</varlistentry>
      </variablelist>
    </refsect2>

  </refsect1>
  <!--
       ##############################
       -
       - END OF DESCRIPTION
       -
       ##############################
  -->

  <!--
      -
      -  OPTIONS
      -
  -->
  <refsect1 id="options">
    <title>OPTIONS</title>

    <para>The following options are supported:</para>

    <variablelist>
      <varlistentry>
	<term><option>-c</option></term>
	<listitem>
	  <para>Show copyright information.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>-h</option></term>
	<listitem>

	  <para>Print help text.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>-i</option></term>
	<listitem>
	  <para>Do not read the configuration file.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>-r</option> <replaceable>rcfile</replaceable></term>

	<listitem>
	  <para>Read the configuration file specified by
	  <replaceable>rcfile</replaceable>. If this option is not given, the
	  default configuration file read is &DEFRCFILE; unless
	  <option>-i</option> is specified.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>-s</option></term>

	<listitem>
	  <para>
	    Disable the check for the owner and file mode when loading
	    files. Without this option, &yp; checks password files for
	    having the same owner as the user running &yp; and
	    verifies that the file mode is strictly 0600. If one of
	    these conditions are not met, &yp; refuses to load the
	    file. Providing this options disables those checks and
	    &yp; will load files with owners other than the process
	    owner of &yp; and file modes different from 0600.
	  </para>

	  <para>
	    New files saved while this option is active will have the
	    file mode set according to umask.
	  </para>

	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>-S</option></term>

	<listitem>
	  <para>
	    Enable the check for the owner and file mode when loading
	    files. This option makes &yp; to load password files
	    having the owner set to the process owner of &yp; and the
	    file mode strictly set to 0600 only. If one of these
	    conditions are not met, &yp; refuses to load the file.
	  </para>

	  <para>
	    New files saved while this option is active will have the
	    file mode set to 0600.
	  </para>

	  <para>
	    This is the default mode.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>-t</option> <replaceable>sec</replaceable></term>

	<listitem>
	  <para>
	    Set the timeout until the screen is locked to
	    <replaceable>sec</replaceable> seconds. The minimum time
	    allowed is 10 seconds. If a lower value is provided, the
	    timeout will be set to 10 seconds.
	  </para>

	  <para>Default: 10 min.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>-V</option></term>
	<listitem>

	  <para>
	    Show version of &yp;.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option><replaceable>filename</replaceable></option></term>

	<listitem>
	  <para>
	    The file to open upon invocation of &yp;. If the file does
	    not exist, &yp; asks whether it should be created.
	  </para>

	  <para>
	    Files created by &yp; always have the
	    suffix <filename moreinfo="none">.pet</filename>.
	  </para>
	</listitem>
      </varlistentry>

    </variablelist>
  </refsect1>

  <!--
      -
      - FILES
      -
  -->
  <refsect1 id="files">
    <title>FILES</title>

    <variablelist>
      <varlistentry>
	<term>&DEFRCFILE;</term>

	<listitem>
	  <para>
	    The per-user configuration file. If existing, options are
	    read from this file but can be overridden by the command
	    line options.
	  </para>

	  <para>
	    Processing of this file can be disabled by invoking &yp;
	    with the <option>-i</option> option.
	  </para>

	  <para>
	    Refer to the &yapet_config; for an explanation of the
	    per-user configuration file.
	  </para>
	</listitem>
      </varlistentry>
    </variablelist>
  </refsect1>

  <!--
      -
      - ENVIRONMENT
      -
  -->
  <!-- NLS_BEGIN -->
  <refsect1 id="environment">
    <title>ENVIRONMENT</title>

    <variablelist>
      <varlistentry>
	<term><envar>LC_MESSAGES</envar></term>

	<listitem>
	  <para>
	    Displaying messages in the specified language. Currently
	    only German is supported besides English.
	  </para>
	</listitem>
      </varlistentry>
    </variablelist>

  </refsect1>
  <!-- NLS_END -->

  <refsect1 id="petfileformat">
    <title>Format of &YP; Files</title>
    
    <para>
      Please refer to the <filename>DESIGN</filename> in source code
      distribution or point your browser
      to <ulink url="http://www.guengel.ch/myapps/yapet/">http://www.guengel.ch/myapps/yapet/</ulink>.
    </para>
  </refsect1>

  <!--
  -
  -  BUGS
  -
  -->
  <refsect1 id="bugs">
    <title>BUGS</title>

    &bugreport;
  </refsect1>

  <!--
  -
  -  AUTHOR
  -
  -->
  <refsect1 id="author">
    <title>AUTHOR</title>
    <simpara>Rafael Ostertag <email>rafi@guengel.ch</email></simpara>
  </refsect1>

  <!--
  -
  -  SEE ALSO
  -
  -->
  <refsect1 id="seealso">
    <title>SEE ALSO</title>

    <simpara>
      <!-- CSV2YAPET_BEGIN -->
      &csv2yapetman;,
      &yapet2csvman;,
      <!-- CSV2YAPET_END -->
      &yapet_config;, 
      &yapet_colors;
    </simpara>
  </refsect1>

  <!--
  -
  - AVAILABILITY
  -
  -->
  <refsect1 id="availability">
    <title>AVAILABILITY</title>

    <para>
      The latest version of &yp; can be found
      under <ulink url="http://www.guengel.ch/myapps/yapet/">http://www.guengel.ch/myapps/yapet/</ulink>.
    </para>
  </refsect1>

</refentry>
