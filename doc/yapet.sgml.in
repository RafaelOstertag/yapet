<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd"
[
<!ENTITY cpr SYSTEM "@srcdir@/copyright.sgml">
<!ENTITY supplatforms SYSTEM "@srcdir@/supportedplatforms.sgml">
<!ENTITY pwrecord SYSTEM "@srcdir@/pwrecord.sgml">
<!ENTITY caution SYSTEM "@srcdir@/caution.sgml">
<!ENTITY OPENSSL "<citerefentry><refentrytitle>ssl</refentrytitle>
<manvolnum>3</manvolnum></citerefentry>">
<!ENTITY CRYPTO "<citerefentry><refentrytitle>crypto</refentrytitle>
<manvolnum>3</manvolnum></citerefentry>">
<!ENTITY CURSES "<citerefentry><refentrytitle>curses</refentrytitle>
<manvolnum>3X</manvolnum></citerefentry>">
<!ENTITY YP "@PACKAGE_NAME@">
<!ENTITY yp "<command>@PACKAGE@</command>">
<!ENTITY FREEBSD "<trademark class='registered'>FreeBSD</trademark>">
<!ENTITY SOLARIS "<trademark class='trademark'>Sun</trademark>
<trademark class='trademark'>Solaris</trademark>">
<!ENTITY YPPKG "@PACKAGE_TARNAME@-@PACKAGE_VERSION@.tar.gz">
<!ENTITY YPVER "@PACKAGE_VERSION@">
]>
<refentry id="yapet">
  <!-- $Id$ -->
  <refmeta>
    <refentrytitle>yapet</refentrytitle>
    <manvolnum>1</manvolnum>
    <refmiscinfo class="version">@PACKAGE_VERSION@</refmiscinfo>
    <refmiscinfo class="manual">&YP; Password Encryption Tool</refmiscinfo>
  </refmeta>

  <refentryinfo>
     <productname>&YP;</productname>
     &cpr;
  </refentryinfo>

  <refnamediv>
    <refname>yapet</refname>
    <refpurpose>store passwords encrypted on disk</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      &yp;
      <arg>-c</arg>
      <arg>-h</arg>
      <arg>-V</arg>
      <arg><replaceable>filename</replaceable></arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <!--
  -
  -  DESCRIPTION
  -
  -->
  <refsect1 id="description">
    <title>DESCRIPTION</title>

    <para>&yp; stands for "Yet Another Password Encryption Tool" and
    is a &CURSES; based program for storing passwords encrypted on
    disk. It relies on the &CRYPTO; library provided by OpenSSL for
    encrypting and decrypting the passwords. The cipher for encryption
    and decryption is Blowfish with a 448 bits key.
    </para>
  </refsect1>

  <!--
  -
  -  OPTIONS
  -
  -->
  <refsect1 id="options">
    <title>OPTIONS</title>

    <variablelist>
      <varlistentry>
	<term>-c</term>
	<listitem>
	  <para>show the copyright information.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-h</term>
	<listitem>

	  <para>print a help text.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-V</term>
	<listitem>

	  <para>show the version of &yp;.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><replaceable>filename</replaceable></term>
	<listitem>
	  <para>the file to open. If the file does not exist, &yp;
	  asks whether it should be created.</para>

	  <para>Files created by &yp; always have the
	      suffix <filename moreinfo="none">.pet</filename>.</para>
	</listitem>
      </varlistentry>
    </variablelist>
  </refsect1>

  <!--
  -
  -  USAGE
  -
  -->
  <refsect1 id="usage">
    <title>USAGE</title>
    <para>
      If you start &yp; without any command line arguments given, you
      will see a screen as shown in <xref linkend="fig.mainscreen"
      />.</para>

<figure id="fig.mainscreen">
  <title>Main screen</title>
  <mediaobject>
    <textobject>
<screen format="linespecific">
		  ..::|| YAPET @PACKAGE_VERSION@ ||::..
+---------------------------++---------------------------+
|                           ||          K E Y S          |
|                           ||---------------------------|
|                           ||   S     Save File         |
|                           ||   R     Load File         |
|                           ||   L     Lock Screen       |
|                           ||   A     Add Entry         |
|                           ||   D     Delete Entry      |
|                           ||   O     Sort Order        |
|                           ||   /     Search            |
|                           ||   N     Search Next       |
|                           ||   C     Change Password   |
|                           ||   ^L    Redraw Screen     |
|                           ||   Q     Quit              |
|                           ||                           |
|                           |+---------------------------+
|                           |+---------------------------+
|                           ||                           |
|                           ||                           |
|                           ||                           |
|                           ||                           |
+---------------------------++---------------------------+
No file loaded
</screen>
    </textobject>
  </mediaobject>
</figure>


    <para>Passwords are stored as records (also referred to as entries)
    having the following fields</para>

    &pwrecord;

    <para>Files created by &yp; always have the
      suffix <filename>.pet</filename>. This cannot be changed by the
      user. Also, if a file is loaded using the command line the
      suffix <filename>.pet</filename> is appended to the file name
      given that it was not specified by the user.</para>

    <para>The password entries are protected by a master password. The
    master password is used to encrypt and decrypt the records. If the
    master password is lost, so are the records.</para>

    <para>
      The upper right frame in <xref linkend="fig.mainscreen" /> shows
      the keys recognized by &yp;. The keys are not
      case-sensitive. Following is a short explanation of the keys.
    </para>

    <variablelist>

      <varlistentry>
	<term><keycap>S</keycap></term> <listitem> <simpara>Saves the
	password records to the file.</simpara> </listitem>
	</varlistentry>

      <varlistentry>
	<term><keycap>R</keycap></term> <listitem> <simpara>Loads
	(reads) a file from disk. This command is also used to create
	a new file. When creating a new file, enter the file name into
	the entry field. &yp; will ask whether it should create the
	file if it does not exist.</simpara> </listitem>
	</varlistentry>

      <varlistentry>
	<term><keycap>L</keycap></term> <listitem> <simpara>Locks and
	blanks the screen. Has only effect if a file is loaded. In
	order to unlock the screen, the password of the currently
	loaded file has to be entered.</simpara> </listitem>
	</varlistentry>

      <varlistentry>
	<term><keycap>A</keycap></term> <listitem> <para>Adds a new
	password entry to the currently loaded file. The entry will be
	permanently added to the file when the file is saved by
	pressing <keycap>S</keycap>.</para>
	  <para>Before you can use this function, you have to load an
	existing file or create a new one by
	pressing <keycap>R</keycap>.</para></listitem>
	</varlistentry>

      <varlistentry>
	<term><keycap>D</keycap></term> <listitem> <para>Deletes a
	password entry from the currently loaded file. The entry will
	be permanently deleted when the file is saved by pressing
	<keycap>S</keycap>.</para> </listitem> </varlistentry>

      <varlistentry>
	<term><keycap>O</keycap></term> <listitem> <para>Changes the
	sort order to either ascending or descending. This setting is
	not kept permanently and is lost upon restart of
	&yp;.</para> <para>The default sort order is
	ascending.</para></listitem> </varlistentry>

      <varlistentry>
	<term><keycap>/</keycap></term> <listitem><para>Starts a new
	    search. &YP; can search the name of the entries for a
	    particular term. If the term is found, the item is
	    highlighted. You can repeat a search by
	    pressing <keycap>N</keycap> using the same term
	    again.</para></listitem> </varlistentry>

      <varlistentry>
	<term><keycap>N</keycap></term> <listitem><para>Repeats a
	    search using the search term specified invoking the search
	    functionality by
	    pressing <keycap>/</keycap>. </para> </listitem>
      </varlistentry>

      <varlistentry>
	<term><keycap>C</keycap></term> <listitem> <para>Change the
	master password of the currently loaded file. This action
	requires to save all changes first. The file with the old
	master password will be saved as
	<filename><replaceable>filename</replaceable>.bak</filename>
	where <replaceable>filename</replaceable> the name of the
	currently loaded file is.</para> </listitem>
	</varlistentry>

      <varlistentry>
	<term>
	  <keycombo action="simul"><keycap>CTRL</keycap>
	    <keycap>L</keycap></keycombo> (<keycap>^L</keycap>)</term>
	    <listitem> <simpara>Redraws the screen.</simpara>
	    </listitem> </varlistentry>

      <varlistentry>
	<term><keycap>Q</keycap></term> <listitem><para>Quits &yp;. If
	changes are not written to disk &yp; will ask whether they
	should be saved or not. Regardless of the answer, &yp; quits,
	either saving the changes or discarding
	them.</para></listitem> </varlistentry>

    </variablelist>

    <para>The empty frame on the left side of the main screen will
    display the password entries' <guilabel>Name</guilabel>. You can
    move the selection by
    using <keycap>Up</keycap>, <keycap>Down</keycap>, <keycap>Page
    Up</keycap>, <keycap>Page Down</keycap>, <keycap>Home</keycap>,
    and <keycap>End</keycap> keys. A entry can be opened for viewing
    and editing by pressing <keycap>Enter</keycap>.</para>

    <para><keycap>Tab</keycap> will switch the focus to the next
    widget. Be aware that <keycombo
    action="simul"><keycap>Shift</keycap><keycap>Tab</keycap></keycombo>
    does not work for focusing the previous widget.</para>

    <para>If there is no key pressed for more than ten (10) minutes,
    &yp; will blank the screen. It will prompt for the password of
    the currently load file when a key is pressed. This is the same
    behavior as seen by pressing the key <keycap>L</keycap>.</para>

  </refsect1>

  <!--
  -
  -  CAUTION
  -
  -->
  <refsect1 id="caution">
    <title>CAUTION</title>
    &caution;
  </refsect1>

  <!--
  -
  -  BUGS
  -
  -->
  <refsect1 id="bugs">
    <title>BUGS</title>

    <itemizedlist>
      <listitem>
	<para>The user interface is clumsy and not really user
	friendly. It may flicker running &yp; in a ssh
	session.</para>
      </listitem>

      <listitem>
	<para>Clearing the memory when it is no longer used seems
	buggy since I was able to snoop the master password in core
	dumps.</para>
      </listitem>

    </itemizedlist>

    <para>If you encouter other bugs, please contact the author.</para>
  </refsect1>

  <!--
  -
  - LICENSE
  -
  -->
  <refsect1 id="license">
    <title>LICENSE</title>

    <para>This program is free software: you can redistribute it
      and/or modify it under the terms of the GNU General Public
      License as published by the Free Software Foundation, either
      version 3 of the License, or (at your option) any later
      version.</para>

    <para>This program is distributed in the hope that it will be
      useful, but WITHOUT ANY WARRANTY; without even the implied
      warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
      See the GNU General Public License for more details.</para>

    <para>You should have received a copy of the GNU General Public
      License along with this program.  If not, see
      <ulink url="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</ulink>.</para>
  </refsect1>

  <!--
  -
  - AVAILABILITY
  -
  -->
  <refsect1 id="availability">
    <title>AVAILABILITY</title>

    <para>The latest version of this program can be found
    under <ulink url="http://www.guengel.ch/myapps/yapet">http://www.guengel.ch/myapps/yapet</ulink>.</para>
  </refsect1>
  <!--
  -
  -  AUTHOR
  -
  -->
  <refsect1 id="author">
    <title>AUTHOR</title>
    <simpara>Rafael Ostertag <email>rafi@guengel.ch</email></simpara>
  </refsect1>

  <!--
  -
  -  SEE ALSO
  -
  -->
  <refsect1 id="seealso">
    <title>SEE ALSO</title>

    <simpara>&CURSES;, &OPENSSL;, &CRYPTO;</simpara>
  </refsect1>
</refentry>
